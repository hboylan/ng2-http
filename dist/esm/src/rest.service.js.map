{"version":3,"file":"rest.service.js","sourceRoot":"","sources":["../../../src/rest.service.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Http,\n  Headers as AngularHeaders,\n  Request,\n  RequestOptions,\n  RequestMethod as RequestMethods,\n  Response,\n  URLSearchParams\n} from '@angular/http';\nimport {Inject, Injectable} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/observable/of';\nimport {Builder} from './util';\n\n/**\n* Angular 2 RESTClient class.\n*\n* @class RESTClient\n* @constructor\n*/\n\nexport class RESTClient {\n  public withCredentials: boolean = false;\n\n  public constructor( protected http: Http) {}\n\n  protected getBaseUrl(): string {\n    if (AngularHeaders) if (RequestOptions) if (URLSearchParams) return null;   // this is to quash unused imports messages\n    return undefined;\n  };\n\n  protected getDefaultHeaders(): Object {\n    return null;\n  };\n\n  /**\n  * Request Interceptor\n  *\n  * @method requestInterceptor\n  * @param {Request} req - request object\n  */\n  protected requestInterceptor(req: Request): Observable<Request> {\n    return Observable.of(req);\n  }\n\n  /**\n  * Response Interceptor\n  *\n  * @method responseInterceptor\n  * @param {Response} res - response object\n  * @returns {Response} res - transformed response object\n  */\n  protected responseInterceptor(res: Observable<Response>): Observable<Response> {\n    return res;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Http, decorators: [{ type: Inject, args: [Http, ] }, ]},\n];\n}\n\n/**\n * Set the base URL of REST resource\n * @param {String} url - base URL\n */\nexport function BaseUrl(url: string) {\n  return function <TFunction extends Function>(Target: TFunction): TFunction {\n    Target.prototype.getBaseUrl = function() {\n      return url;\n    };\n    return Target;\n  };\n}\n\n/**\n * Set default headers for every method of the RESTClient\n * @param {Object} headers - deafult headers in a key-value pair\n */\nexport function DefaultHeaders(headers: any) {\n  return function <TFunction extends Function>(Target: TFunction): TFunction {\n    Target.prototype.getDefaultHeaders = function() {\n      return headers;\n    };\n    return Target;\n  };\n}\n\n\n/**\n * Set custom headers for a REST method\n * @param {Object} headersDef - custom headers in a key-value pair\n */\nexport function Headers(headersDef: any) {\n  return function(target: RESTClient, propertyKey: string, descriptor: any) {\n    descriptor.headers = headersDef;\n    return descriptor;\n  };\n}\n\n\n/**\n * Defines the type(s) that the responses can produce\n */\nexport function Produces<T>(interceptor?: (res: Response) => any) {\n  return function(target: RESTClient, propertyKey: string, descriptor: any) {\n    descriptor.producer = (res: Response): any => {\n      let data;\n      if (interceptor) {\n        data = interceptor(res);\n      }\n      return data || <T>res.json()\n    };\n    return descriptor;\n  };\n}\n\n\n/**\n * Path variable of a method's url, type: string\n * @param {string} key - path key to bind value\n */\nexport let Path = Builder.param('Path');\n/**\n * Query value of a method's url, type: string\n * @param {string} key - query key to bind value\n */\nexport let Query = Builder.param('Query');\n/**\n * Body of a REST method, type: key-value pair object\n * Only one body per method!\n */\nexport let Body = Builder.param('Body')('Body');\n/**\n * Custom header of a REST method, type: string\n * @param {string} key - header key to bind value\n */\nexport let Header = Builder.param('Header');\n\n/**\n * GET method\n * @param {string} url - resource url of the method\n */\nexport let GET = Builder.method(RequestMethods.Get);\n/**\n * POST method\n * @param {string} url - resource url of the method\n */\nexport let POST = Builder.method(RequestMethods.Post);\n/**\n * PUT method\n * @param {string} url - resource url of the method\n */\nexport let PUT = Builder.method(RequestMethods.Put);\n/**\n * DELETE method\n * @param {string} url - resource url of the method\n */\nexport let DELETE = Builder.method(RequestMethods.Delete);\n/**\n * HEAD method\n * @param {string} url - resource url of the method\n */\nexport let HEAD = Builder.method(RequestMethods.Head);\n/**\n * PATCH method\n * @param {string} url - resource url of the method\n */\nexport let PATCH = Builder.method(RequestMethods.Patch);\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}